(()=>{"use strict";const e=new class{async get(e){const t=await fetch(e);return await t.json()}async post(e,t){const r=await fetch(e,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(t)});return await r.json()}async update(e,t){const r=await fetch(e,{method:"PUT",body:{"Content-type":"application;/json"},headers:JSON.stringify(t)});return await r.json()}async delete(e){return await fetch(e,{method:"Delete"}),await"Resource Deleted..."}},t=new class{constructor(){this.homeSection=document.querySelector("#home-a"),this.table=document.querySelector("#market-table"),this.tBody=document.querySelector("#mt-body")}fetchMarkets(e){let t="";void 0===e.length&&(e=[e]),this.table.style.visibility="visible",document.getElementById("footer").style.visibility="visible";for(let r=0;r<e.length;r++)t+=`<tr><td><a href="${e[r].url}"><img src="${e[r].image}"><span>${e[r].name}</span></a></td><td>${parseFloat(e[r].trade_volume_24h_btc.toFixed(0)).toLocaleString().replace(".",",")}</td><td>${e[r].trust_score}</td><td>${e[r].trust_score_rank}</td></tr>`;this.tBody.innerHTML=t}sort(e){let t=this.tBody.querySelectorAll("tr"),r=t.length,n=[];if(this.tBody.innerHTML="",e.classList.contains("unordered")){e.className="ordered",n=Array.from(t).sort(((e,t)=>e.childNodes[0].firstChild.childNodes[1].innerHTML>t.childNodes[0].firstChild.childNodes[1].innerHTML?1:e.childNodes[0].firstChild.childNodes[1].innerHTML<t.childNodes[0].firstChild.childNodes[1].innerHTML?-1:0));for(let e=0;e<r;e++)this.tBody.insertRow(e).innerHTML=n[e].innerHTML}else if(e.classList.contains("ordered")){e.className="unordered",n=Array.from(t).sort(((e,t)=>t.firstChild.firstChild.childNodes[1].innerHTML.localeCompare(e.firstChild.firstChild.childNodes[1].innerHTML)));for(let e=0;e<r;e++)this.tBody.insertRow(e).innerHTML=n[e].innerHTML}}sort_2(e){let t=this.tBody.querySelectorAll("tr"),r=t.length,n=[];if(this.tBody.innerHTML="",e.classList.contains("unordered")){e.className="ordered",e.firstChild.classList.add("down"),n=Array.from(t).sort(((e,t)=>parseFloat(t.childNodes[1].innerHTML.replace(/,+/g,""))-parseFloat(e.childNodes[1].innerHTML.replace(/,+/g,""))));for(let e=0;e<r;e++)this.tBody.insertRow(e).innerHTML=n[e].innerHTML}else if(e.classList.contains("ordered")){e.className="unordered",e.firstChild.classList.remove("down"),n=Array.from(t).sort(((e,t)=>parseFloat(e.childNodes[1].innerHTML.replace(/,+/g,""))-parseFloat(t.childNodes[1].innerHTML.replace(/,+/g,""))));for(let e=0;e<r;e++)this.tBody.insertRow(e).innerHTML=n[e].innerHTML}}sort_3(e){let t=this.tBody.querySelectorAll("tr"),r=t.length,n=[];if(this.tBody.innerHTML="",e.classList.contains("unordered")){e.className="ordered",e.firstChild.classList.add("down"),n=Array.from(t).sort(((e,t)=>t.childNodes[2].innerHTML-e.childNodes[2].innerHTML));for(let e=0;e<r;e++)this.tBody.insertRow(e).innerHTML=n[e].innerHTML}else if(e.classList.contains("ordered")){e.className="unordered",e.firstChild.classList.remove("down"),n=Array.from(t).sort(((e,t)=>e.childNodes[2].innerHTML-t.childNodes[2].innerHTML));for(let e=0;e<r;e++)this.tBody.insertRow(e).innerHTML=n[e].innerHTML}}sort_4(e){let t=this.tBody.querySelectorAll("tr"),r=t.length,n=[];if(this.tBody.innerHTML="",e.classList.contains("unordered")){e.className="ordered",e.firstChild.classList.add("down"),n=Array.from(t).sort(((e,t)=>e.childNodes[3].innerHTML-t.childNodes[3].innerHTML));for(let e=0;e<r;e++)this.tBody.insertRow(e).innerHTML=n[e].innerHTML}else if(e.classList.contains("ordered")){e.className="unordered",e.firstChild.classList.remove("down"),n=Array.from(t).sort(((e,t)=>t.childNodes[3].innerHTML-e.childNodes[3].innerHTML));for(let e=0;e<r;e++)this.tBody.insertRow(e).innerHTML=n[e].innerHTML}}};document.getElementById("burgerMenu").addEventListener("click",(e=>{e.preventDefault(),e.currentTarget.classList.toggle("burgerActive"),document.getElementById("navbar").classList.toggle("menuActive")}));const r=new class{constructor(){this.topNav=document.getElementById("nav-data"),this.total,this.exchanges,document.querySelector("#total")&&document.querySelector("#markets")&&(this.total=document.querySelector("#total").firstElementChild,this.exchanges=document.querySelector("#markets").firstElementChild)}async getMarketData(t){await e.get(t).then((e=>{!function(e,t,r,n){const o=parseFloat(e.data.market_cap_change_percentage_24h_usd).toFixed(2);let s;s=o>0?`<i class="fas fa-caret-up"></i> <b>${o}%</b>`:o<0?`<i class="fas fa-caret-down"></i> <b>${o.replace("-","")}%</b>`:`${o}%`,t.innerHTML=`<li><div><span>Total Market Cap: </span><a href='global.html'>$${parseFloat(e.data.total_market_cap.usd.toFixed(0)).toLocaleString()}</a><span> ${s}</span></div></li>\n  <li>24h Vol: <a href='global.html'>$${parseFloat(e.data.total_volume.usd.toFixed(0)).toLocaleString().replace(".",",")}</a></li>\n  <li>Btc dominance: <b>${parseFloat(e.data.market_cap_percentage.btc).toFixed(2)}%</b></li>`;let i=t.firstChild.firstChild.firstChild.nextElementSibling.nextElementSibling;parseFloat(o)>0?(i.style.color="green",i.querySelector("i").style.color="green"):parseFloat(o)<0?(i.style.color="red",i.querySelector("i").style.color="red"):i.style.color="#333333",r&&n&&(r.innerHTML=`Coins: <span class="span-info">${e.data.active_cryptocurrencies}</span>`,n.innerHTML=`Exchanges: <span class="span-info">${e.data.markets}</span>`)}(e,this.topNav,this.total,this.exchanges)})).catch((e=>{console.log(e),location.reload()})),""!==this.topNav.innerHTML&&void 0!==this.topNav.innerHTML&&null!==this.topNav.innerHTML||location.reload(),setTimeout((function(){const e=document.getElementById("nav-data");""!==e.innerHTML&&void 0!==e.innerHTML&&null!==e.innerHTML||location.reload()}),1e3)}},n=new class{constructor(){}pageLeft(e,t){let r=e.getAttribute("id"),n=t.getAttribute("id"),o=r.valueOf();return t.setAttribute("id",n-1),e.setAttribute("id",r-1),document.querySelector("#main-table")?`https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=25&page=${o}&sparkline=false&price_change_percentage=7d`:document.querySelector("#market-table")?`https://api.coingecko.com/api/v3/exchanges?per_page=50&page=${o}`:void 0}pageRight(e,t){let r=t.getAttribute("id"),n=e.getAttribute("id"),o=r.valueOf();return 1==n&&t.classList.remove("hover"),1==r&&""==n?(o++,e.setAttribute("id",o)):(o=parseInt(n.valueOf())+1,e.setAttribute("id",parseInt(n.valueOf())+1),t.setAttribute("id",n)),document.querySelector("#main-table")?`https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=25&page=${o}&sparkline=true&price_change_percentage=7d`:document.querySelector("#market-table")?`https://api.coingecko.com/api/v3/exchanges?per_page=50&page=${o}`:void 0}},o=new class{constructor(){this.homeSection=document.querySelector("#home-a"),this.table=document.querySelector("#main-table"),this.mTable=document.querySelector("#market-table"),this.tBody=document.querySelector("#mt-body")}filterList(e,t){if(null==e.value)return;const r=Array.from(this.tBody.querySelectorAll("tr"));for(let n=0;n<r.length;n++)null!=r[n].childNodes[t].firstChild.childNodes[1].innerHTML.toUpperCase().match(e.value.toUpperCase())?r[n].style.display="":r[n].style.display="none"}};async function s(r){document.getElementById("loader").classList="loader",await e.get(r).then((e=>{t.fetchMarkets(e)})).catch((e=>console.log(e)));const n=document.getElementById("mt-body").innerHTML;""!==n&&null!=n||s(r),document.getElementById("loader").className=""}function i(r){r.preventDefault();let n=document.querySelector("#search").value,o="";const s=document.querySelector("#mt-body").querySelectorAll("tr");if(console.log(n),n&&0!==n.length&&n.trim()){for(let e=0;e<s.length;e++)if(s[e].firstChild.innerHTML.toUpperCase().indexOf(n.toUpperCase())>=0)return;o=`https://api.coingecko.com/api/v3/exchanges/${n}`,e.get(o).then((e=>{t.fetchMarkets(e),console.log(e)})).catch((e=>console.log(e)))}}document.addEventListener("DOMContentLoaded",r.getMarketData("https://api.coingecko.com/api/v3/global")),document.addEventListener("DOMContentLoaded",s("https://api.coingecko.com/api/v3/exchanges?per_page=50&page=1")),document.querySelector("#market").addEventListener("click",(function(e){t.sort(e.target),e.preventDefault()})),document.querySelector("#vol").addEventListener("click",(function(e){t.sort_2(e.target),e.preventDefault()})),document.querySelector("#trustScore").addEventListener("click",(function(e){t.sort_3(e.target),e.preventDefault()})),document.querySelector("#trustRank").addEventListener("click",(function(e){t.sort_4(e.target),e.preventDefault()})),document.querySelector("#list-pages").addEventListener("click",(function(e){const t=e.target,r=document.querySelector(".left"),o=document.querySelector(".right");t.classList.contains("left")?s(n.pageLeft(t,o)):t.classList.contains("right")&&(s(n.pageRight(t,r)),r.classList.add("hover"))})),document.querySelector("#search").addEventListener("keyup",(e=>{o.filterList(e.target,0)})),document.querySelector("#searchIcon").addEventListener("click",i),document.querySelector("#searchForm").addEventListener("submit",i)})();