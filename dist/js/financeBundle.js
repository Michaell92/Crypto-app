(()=>{"use strict";const e=new class{async get(e){const t=await fetch(e);return await t.json()}async post(e,t){const n=await fetch(e,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(t)});return await n.json()}async update(e,t){const n=await fetch(e,{method:"PUT",body:{"Content-type":"application;/json"},headers:JSON.stringify(t)});return await n.json()}async delete(e){return await fetch(e,{method:"Delete"}),await"Resource Deleted..."}};document.getElementById("burgerMenu").addEventListener("click",(e=>{e.preventDefault(),e.currentTarget.classList.toggle("burgerActive"),document.getElementById("navbar").classList.toggle("menuActive")}));const t=new class{constructor(){this.topNav=document.getElementById("nav-data"),this.total,this.exchanges,document.querySelector("#total")&&document.querySelector("#markets")&&(this.total=document.querySelector("#total").firstElementChild,this.exchanges=document.querySelector("#markets").firstElementChild)}async getMarketData(t){await e.get(t).then((e=>{!function(e,t,n,r){const a=parseFloat(e.data.market_cap_change_percentage_24h_usd).toFixed(2);let l;l=a>0?`<i class="fas fa-caret-up"></i> <b>${a}%</b>`:a<0?`<i class="fas fa-caret-down"></i> <b>${a.replace("-","")}%</b>`:`${a}%`,t.innerHTML=`<li><div><span>Total Market Cap: </span><a href='global.html'>$${parseFloat(e.data.total_market_cap.usd.toFixed(0)).toLocaleString()}</a><span> ${l}</span></div></li>\n  <li>24h Vol: <a href='global.html'>$${parseFloat(e.data.total_volume.usd.toFixed(0)).toLocaleString().replace(".",",")}</a></li>\n  <li>Btc dominance: <b>${parseFloat(e.data.market_cap_percentage.btc).toFixed(2)}%</b></li>`;let s=t.firstChild.firstChild.firstChild.nextElementSibling.nextElementSibling;parseFloat(a)>0?(s.style.color="green",s.querySelector("i").style.color="green"):parseFloat(a)<0?(s.style.color="red",s.querySelector("i").style.color="red"):s.style.color="#333333",n&&r&&(n.innerHTML=`Coins: <span class="span-info">${e.data.active_cryptocurrencies}</span>`,r.innerHTML=`Exchanges: <span class="span-info">${e.data.markets}</span>`)}(e,this.topNav,this.total,this.exchanges)})).catch((e=>{console.log(e),location.reload()})),""!==this.topNav.innerHTML&&void 0!==this.topNav.innerHTML&&null!==this.topNav.innerHTML||location.reload(),setTimeout((function(){const e=document.getElementById("nav-data");""!==e.innerHTML&&void 0!==e.innerHTML&&null!==e.innerHTML||location.reload()}),1e3)}},n=new class{constructor(){this.tBody=document.getElementById("mt-body"),this.table=document.getElementById("finance-table")}async finData(e){this.table.style.visibility="visible",document.getElementById("footer").style.visibility="visible";let t,n="";const r=e[1],a=document.createElement("select");for(let l=0;l<e[0].length;l++){let s="",o=[];for(let t=0;t<r.length;t++)e[0][l].name===r[t].platform&&(s+=`<option>${r[t].identifier}</option>`,o.push(r[t].supply_rate_percentage));a.innerHTML=s,a.className="select",t=!0===e[0][l].centralized?'class="fas fa-check" style="color:green"':'class="fas fa-times" style="color:red"',n+=`<tr><td><a href="${e[0][l].website_url}">${e[0][l].name}</a></td><td><i ${t}></i></td>\n      <td>\n      ${s[0]?a.outerHTML:""}\n      </td>\n      <td class="supplyRate">${s[0]?parseFloat(o[0]).toFixed(2):""}</td>\n      </tr>`}this.tBody.innerHTML=n}changeRate(e,t){const n=t.closest("tr").lastElementChild;for(let r=0;r<e.length;r++)e[r].identifier===t.value&&(n.innerHTML=parseFloat(e[r].supply_rate_percentage).toFixed(2))}sort_1(e){const t=Array.from(document.querySelector("#mt-body").querySelectorAll("tr"));if(this.tBody.innerHTML="","unordered"==e.className){e.className="ordered";const n=t.sort(((e,t)=>e.firstElementChild.firstElementChild.innerHTML.toUpperCase()>t.firstElementChild.firstElementChild.innerHTML.toUpperCase()?1:e.firstElementChild.firstElementChild.innerHTML.toUpperCase()<t.firstElementChild.firstElementChild.innerHTML.toUpperCase()?-1:0));for(let e=0;e<t.length;e++)this.tBody.insertRow(e).innerHTML=n[e].innerHTML}else{e.className="unordered";const n=t.sort(((e,t)=>e.firstElementChild.firstElementChild.innerHTML.toUpperCase()<t.firstElementChild.firstElementChild.innerHTML.toUpperCase()?1:e.firstElementChild.firstElementChild.innerHTML.toUpperCase()>t.firstElementChild.firstElementChild.innerHTML.toUpperCase()?-1:0));for(let e=0;e<t.length;e++)this.tBody.insertRow(e).innerHTML=n[e].innerHTML}}sort_2(e){const t=Array.from(document.querySelector("#mt-body").querySelectorAll("tr"));if(this.tBody.innerHTML="","unordered"==e.className){e.className="ordered",e.firstChild.className="fas fa-caret-down";const n=[...t.filter((e=>e.children[1].firstChild.classList.contains("fa-check")?1:0)),...t.filter((e=>e.children[1].firstChild.classList.contains("fa-check")?0:1))];for(let e=0;e<t.length;e++)this.tBody.insertRow(e).innerHTML=n[e].innerHTML}else{e.className="unordered",e.firstChild.className="fas fa-caret-up";const n=[...t.filter((e=>e.children[1].firstChild.classList.contains("fa-check")?0:1)),...t.filter((e=>e.children[1].firstChild.classList.contains("fa-check")?1:0))];for(let e=0;e<t.length;e++)this.tBody.insertRow(e).innerHTML=n[e].innerHTML}}sort_3(e){const t=Array.from(document.querySelector("#mt-body").querySelectorAll("tr"));if(this.tBody.innerHTML="","unordered"==e.className){e.className="ordered",e.firstChild.className="fas fa-caret-down";const n=t.sort(((e,t)=>{let n=e.children[3].innerHTML,r=t.children[3].innerHTML;return parseFloat(""===r?"-1":r)-parseFloat(""===n?"-1":n)}));for(let e=0;e<t.length;e++)this.tBody.insertRow(e).innerHTML=n[e].innerHTML}else{e.className="unordered",e.firstChild.className="fas fa-caret-up";const n=t.sort(((e,t)=>{let n=e.children[3].innerHTML,r=t.children[3].innerHTML;return parseFloat(""===n?"-1":n)-parseFloat(""===r?"-1":r)}));for(let e=0;e<t.length;e++)this.tBody.insertRow(e).innerHTML=n[e].innerHTML}}},r="https://api.coingecko.com/api/v3/finance_products?per_page=100";document.addEventListener("DOMContentLoaded",(async function t(){document.getElementById("loader").className="loader";const a=["https://api.coingecko.com/api/v3/finance_platforms?per_page=50",r],l=[];for(const n of a)await e.get(n).then((e=>{l.push(e)})).catch((e=>{t(),console.log(e)}));await n.finData(l);const s=document.getElementById("mt-body").innerHTML,o=document.getElementById("mt-body").firstChild.firstChild.firstChild.innerHTML;""!==o&&"undefined"!==o&&null!==o&&""!==s&&null!=s||location.reload(),document.getElementById("loader").className=""})),document.addEventListener("DOMContentLoaded",t.getMarketData("https://api.coingecko.com/api/v3/global")),document.getElementById("mt-body").addEventListener("change",(t=>{const a=t.target.closest("select");e.get(r).then((e=>n.changeRate(e,a))).catch((e=>console.log(e)))})),document.querySelector("#search").addEventListener("keyup",(function(e){if(null==e.target.value)return;const t=Array.from(document.querySelector("#mt-body").querySelectorAll("tr"));for(let n=0;n<t.length;n++)null!=t[n].childNodes[0].firstChild.innerHTML.toUpperCase().match(e.target.value.toUpperCase())?t[n].style.display="":t[n].style.display="none"})),document.querySelector("#platform").addEventListener("click",(function(e){e.preventDefault(),n.sort_1(e.target)})),document.querySelector("#category").addEventListener("click",(function(e){e.preventDefault(),n.sort_2(e.target)})),document.querySelector("#supply").addEventListener("click",(function(e){e.preventDefault(),n.sort_3(e.target)}))})();